---
output: pdf_document
header-includes: 
- \usepackage[utf8]{inputenc}
- \usepackage[T1]{fontenc}
- \usepackage[ngerman]{babel}
- \usepackage{amsmath,amssymb,amsthm}
- \usepackage{dsfont}
- \usepackage{listings}
- \usepackage{enumitem}
- \usepackage{floatrow}
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- '\fancyhead[C,C]{Gruppe 5: Robin Baudisch, Merlin Kopfmann, Maximilian Neudert}'
- \fancyhead[L]{}
- \fancyhead[R]{}
- \fancyfoot[C,C]{\thepage}
- \renewcommand{\footrulewidth}{0.4pt}
- \newcommand{\argmin}{\operatorname{arg}\min}
- \newcommand{\R}{\mathds{R}}
---

<style type="text/css">
body{
  font-size: 12px;
}
h1 {
  font-size: 18px;
}
h1 {
  font-size: 14px;
}
h1 {
  font-size: 12px;
}
</style>

```{r global_options, include=FALSE}
knitr::opts_chunk$set(error=TRUE,        # Keep compiling upon error
                      collapse=TRUE,     # collapse by default
                      echo=TRUE,         # echo code by default
                      comment = "#>",    # change comment character
                      fig.width = 10,     # set figure width
                      out.width = "100%", # set width of displayed images
                      warning=FALSE,      # show R warnings
                      message=FALSE)     # show R messages
```

<!---** Hochschule Darmstadt | Studiengang Data Science | Sommersemester 2019 **--->

```{r, echo=FALSE}
set.seed(42)
usepackage = function(p) 
{
  if (!is.element(p, installed.packages()[,1]))
    install.packages(p, dep = TRUE)
  require(p, character.only = TRUE)
}
usepackage('ggplot2')
usepackage('MASS')
usepackage('tidyr')
usepackage('splines')
```

# Praktikum 9

## Aufgabe 1

### a)

## Aufgabe 2

### a)

Sei $\lambda$ fest.

$$
\hat f(x)
= \left( \sum_{i = 1}^n K_\lambda(x,x_i) y_i \right) \left( \sum_{i = 1}^n K_\lambda(x,x_i) \right)^{-1}
$$

Der Tricube-Kern ist definiert als

$$
K_\lambda(x, x_i) =
\begin{cases}
\left(1 - \left|\frac{x-x_i}{\lambda}\right|^3\right)^3, & | x - x_i | \leq \lambda \\
0, & \text{sonst}.
\end{cases}
$$

Für $x_i$ fest ist $K_\lambda(x, x_i)$ für jedes $x_i$ ohne $|x - x_i| = \lambda$ als Verknüpfung differenzierbarer Funktionen differenzierbar. Folglich bleiden die Punkte

$$
|x - x_i| = \lambda \implies x_0 = \lambda + x_i\ \text{und}\ x_0 = x_i - \lambda
$$

als kritische Stellen auf Stetigkeit zu prüfen. Der Kern ist offensichtlich stetig in $x_0$, da der Wert beidseitig problemlos gegen $0$ konvergiert. Wir prüfen die Differenzierbarkeit:

Sei $x_0 = \lambda + x_i$.

\begin{align}
\lim_{h \to 0}
& = 
\frac 1 h 
\left( 
\left( 1 - \left| \frac{\lambda + x_i - x_i +h}{\lambda} \right|^3 \right)^3
- \left( 1 - \left| \frac{\lambda + x_i - x_i}{\lambda} \right|^3 \right)
\right)\\
& = 
\lim_{h \to 0}
\frac 1 h
\left(
\left(1 - \left| 1 + \frac h \lambda \right|^3 \right)^3
- (1 - 1)^3
\right)\\
& =
\lim_{h \to 0}
\frac 1 h
\left( 1 - \left( 1 + \frac h \lambda \right)^3 \right)^3\\
& =
\lim_{h \to 0}
\frac 1 h
\left(
1 - \left( 1 + 3 \frac h \lambda + 3 \frac{h^2}{\lambda^2} + \frac{h^3}{\lambda^3} \right)^3
\right)^3\\
& = 
\lim_{h \to 0}
\frac 1 h
\left(3 \frac h \lambda + 3 \frac{h^2}{\lambda^2} + \frac{h^3}{\lambda^3} \right)^3
= 0
\end{align}

und der linksseitige Beweis ($-h$) folgt analog.

Sei $x_0 = x_i - \lambda$.

\begin{align}
\lim_{h \to 0}
& = 
\frac 1 h 
\left( 
\left( 1 - \left| \frac{x_i - \lambda - x_i +h}{\lambda} \right|^3 \right)^3
- \left( 1 - \left| \frac{- \lambda + x_i - x_i}{\lambda} \right|^3 \right)
\right)\\
& = 
\lim_{h \to 0}
\frac 1 h
\left(
\left(1 - \underbrace{\left| - 1 + \frac h \lambda \right|}_{<0\ \text{für}\ h \to 0}^3 \right)^3
- (1 - 1)^3
\right)\\
& =
\lim_{h \to 0}
\frac 1 h
\left( 1 - \left(1 -\frac h \lambda\right)^3 \right)^3\\
& =
\lim_{h \to 0}
\frac 1 h
\left(
1 - \left( 1 - 3 \frac h \lambda + 3 \frac{h^2}{\lambda^2} - \frac{h^3}{\lambda^3}\right)^3
\right)^3\\
& = 
\lim_{h \to 0}
\frac 1 h
\left(- 3 \frac h \lambda + 3 \frac{h^2}{\lambda^2} - \frac{h^3}{\lambda^3} \right)^3
= 0
\end{align}


und der linksseitige Beweis ($-h$) folgt analog.

Somit ist $K_\lambda(x, x_i)$ stetig differenzierbar und folglich ist $\hat f(x)$ ist Verkettung differenzierbarer Funktionen differenzierbar.

### b)

Nimmt man nun den Epanechnikov Kernel

$$
K_\lambda(x, x_i) =
\begin{cases}
\frac 3 4 \left(1 - \left(\frac{x-x_i}{\lambda}\right)^2\right), & | x - x_i | \leq \lambda \\
0, & \text{sonst}.
\end{cases}
$$

dann sieht man, dass der Beweis der differenzierbarkeit analog verläuft. Der einzige nennenswerte Unterschied ist der Wegfall der beiden kubischen Potzen zu einer quadratischen Potenz.

Somit bleibt in Schritt (10) ein Term der Form

$$
\lim_{h \to 0}
\frac 1 h
a \left(b \frac h \lambda + c \frac{h^2}{\lambda^2} \right), \quad a,b,c \in \R
$$

und dieser konvergiert wieder problemlos gegen $0$ und wir erhalten die Differenzierbarkeit.

### c)

Ersetzen wir im Beweis der Differenzierbarkeit alle Vorkommen von $\lambda$ durch eine variable Funktion $h_\lambda(x) > 0$, so verändert sich im Beweis nichts grundlegen. Die Limiten konvergieren und der Kernel Smoother bleibt differenzierbar.

